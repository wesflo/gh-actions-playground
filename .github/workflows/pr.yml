name: PR

on:
  pull_request:

env:
  WORKDIR: ${{ vars.WORKDIR || '.' }}
  NODE_VERSION: ${{ vars.NODE_VERSION || '20' }}

jobs:
  test:
    uses: wesflo/gh-actions-workflows/.github/workflows/test-coverage.yml@v1
    with:
      workdir: ${{ env.WORKDIR }}
      node_version: ${{ env.NODE_VERSION }}

  yeyy:
    runs-on: ubuntu-latest
    needs: test
    if: ${{ needs.test.result == 'success' }}
    steps:
      - run: echo "Yeyy"

  ohhh:
    runs-on: ubuntu-latest
    needs: test
    if: ${{ always() && needs.test.result == 'failure' }}
    steps:
      - run: echo "ohhh"
